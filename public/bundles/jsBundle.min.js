!function(){"use strict";function t(t,e){t.state("Home",{url:"/",templateUrl:"views/home.html"}).state("parking",{url:"/parking",templateUrl:"views/parking.html"}).state("postSpot",{url:"/postSpot",templateUrl:"views/PostSpot.html"}),e.otherwise("/")}angular.module("app",["ui.router"]).config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){function e(e){t.removeSpot(e)}var o=this;o.spots=t.spots,o.deleteSpot=e}angular.module("app").controller("HomeController",t),t.$inject=["HomeFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.user={},o.status=t.status,o.logout=t.logout,o.scrollTo=function(t){window.scrollTo(0,$(t)[0].offsetTop-5)}}angular.module("app").controller("NavCtrl",t),t.$inject=["UserFactory","$state"]}(),function(){"use strict";function t(t,e){function o(){t.upload(s.spot).then(function(){s.spot={},e.go("parking")})}var s=this;s.upload=o}angular.module("app").controller("postSpotCtrl",t),t.$inject=["HomeFactory","$state"]}(),function(){"use strict";function t(t,e){function o(){var o=n.user;return o.username&&o.email&&o.password&&o.cpassword&&o.password===o.cpassword?void t.signup(o).then(function(){n.user={},e.go("parking")}):!1}function s(){t.login(n.user).then(function(){n.user={},e.go("parking")})}var n=this;n.user={},n.status=t.status,n.status.isopen=!1,n.signup=o,n.login=s}angular.module("app").controller("userCtrl",t),t.$inject=["UserFactory","$state"]}(),function(){"use strict";function t(t,e){function o(o){var s=e.defer();return o.deleted=null,t.post("/api/Spot",o,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).success(function(t){o._id=t._id,o.created=t.created,o.user=JSON.parse(atob(localStorage.token.split(".")[1])).username,s.resolve()}).error(function(t){console.error(t)}),s.promise}function s(e){t["delete"]("/api/Spot/"+e._id,{headers:{Authorization:"Bearer "+localStorage.token}}).success(function(){n.spots.splice(n.spots.indexOf(e),1)})}var n={};return n.spots=[],n.upload=o,n.removeSpot=s,t.get("/api/Spot").success(function(t){for(var e=0;e<t.length;e++)n.spots.push(t[e])}),n}angular.module("app").factory("HomeFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e){function o(o){console.log("dfsfs");var s=e.defer();return t.post("/api/Users/Signup",o).success(function(t){r(t.token),c.status.isLoggedIn=!0,s.resolve()}),s.promise}function s(o){var s={username:o.username.toLowerCase(),password:o.password},n=e.defer();return t.post("/api/Users/Login",s).success(function(t){r(t.token),c.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){c.status.isLoggedIn=!1,a()}function r(t){localStorage.setItem("token",t),c.status.username=i()}function u(){return localStorage.token}function a(){localStorage.removeItem("token"),c.status.username=null}function i(){return JSON.parse(atob(u().split(".")[1])).username}var c={};return c.status={},u()?(c.status.isLoggedIn=!0,c.status.username=i()):(c.status.isLoggedIn=!1,c.status.username=null),c.setToken=r,c.getToken=u,c.removeToken=a,c.signup=o,c.login=s,c.logout=n,c}angular.module("app").factory("UserFactory",t),t.$inject=["$http","$q"]}();